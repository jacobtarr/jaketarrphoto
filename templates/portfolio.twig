{% extends '_layouts/global.twig' %}

{% block site %}
  <section class="c-portfolio-page c-page">
    {# Initialize Datastar signals with query params for persistence #}
    {% set q = craft.app.request.getQueryParams() %}
    
    <div data-signals="{{ {
      state: q.state ?? '',
      season: q.season is defined ? (q.season is iterable ? q.season : [q.season]) : [],
      genre: q.genre is defined ? (q.genre is iterable ? q.genre : [q.genre]) : [],
      sort: q.sort ?? '',
      offset: (q.offset ?? 0)|number,
      limit: (q.limit ?? 9)|number,
      isLoadMore: false
    }|json_encode }}">
      {{ include('_partials/portfolio/photo-grid-container.twig') }}
    </div>
  </section>
{% endblock %}