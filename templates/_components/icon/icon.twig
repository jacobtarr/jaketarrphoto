{#
  Expects:
    icon = {
      name?: string                     # icon name (e.g., 'twitter' â†’ 'icon-twitter.svg')
      path?: string                     # OR full path (e.g., 'portfolio/season/spring.svg')
      tag?: string                      # wrapper tag, defaults to "span"
      url?: string                      # only used if tag is "a"
      target?: string                   # link target (default "_self")
      classes?: string                  # extra classes for wrapper
      attrs?: { [key: string]: string } # extra attributes
    }

  Examples:
    # Named icon (standard icons in root)
    {% include '_components/icon/icon.twig' with {
      icon: {
        name: 'checkmark',
        classes: 'w-4 h-4'
      }
    } %}

    # Path-based icon (nested icons)
    {% include '_components/icon/icon.twig' with {
      icon: {
        path: 'portfolio/season/spring.svg',
        classes: 'w-5 h-5'
      }
    } %}

    # Icon as a link
    {% include '_components/icon/icon.twig' with {
      icon: {
        name: 'instagram',
        tag: 'a',
        url: 'https://www.instagram.com/jacobtarr/',
        target: '_blank',
        classes: 'text-gray-900 hover:text-gray-600',
        attrs: { rel: 'noopener noreferrer' }
      }
    } %}
#}

{% set icon = icon ?? {} %}
{% set tag = icon.tag ?? 'span' %}
{% set additionalClasses = icon.classes is defined and icon.classes ? ' ' ~ icon.classes : '' %}
{% set attrs = icon.attrs ?? {} %}

{% if tag == 'a' %}
  {% set attrs = attrs|merge({
    href: icon.url ?? '#',
    target: icon.target ?? '_self'
  }) %}
{% endif %}

{# Build the icon file path #}
{% set iconPath = null %}
{% if icon.path is defined and icon.path %}
  {% set iconPath = icon.path %}
{% elseif icon.name is defined and icon.name %}
  {% set iconPath = 'icon-' ~ icon.name ~ '.svg' %}
{% endif %}

<{{ tag }} class="c-icon{{ additionalClasses }}"
  {% for key, value in attrs %}
    {{ key }}="{{ value is iterable ? value|join(',') : value }}"
  {% endfor %}
>
  {% if iconPath %}
    {% include '_components/icon/icons/' ~ iconPath ignore missing %}
  {% endif %}
</{{ tag }}>