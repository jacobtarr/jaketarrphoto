{% extends '_base/_basePageBlock.twig' %}

{% block pageBlockContent %}
  {% import '_components/atoms/image.twig' as img %}
  <div x-data="sliderData()">
    <div class="c-slider-section">
      <div class="c-slider-grid grid grid-cols-16 gap-5">
        {# Left Content Column #}
        <div class="c-slide-content-container col-span-16 md:col-span-4">
          <div class="c-slide-content">
            <div class="c-slide-content__inner">
              {# <div class="c-slide-content__number text-6xl" x-text="(currentIndex + 1).toString().padStart(2, '0')"></div> #}
              <div class="c-slide-content__info space-y-4 md:space-y-8">
                {% include '_components/molecules/kicker.twig' with {
                  "kicker": {
                    "text": block.title,
                  }
                } %}
                <div class="space-y-5">
                  {% include '_components/atoms/heading.twig' with {
                    "heading": {
                      "classes": 'c-active-title',
                      "tag": 'h3',
                      "underline": false,
                      "text": 'Active Title',
                      attrs: {
                        'x-html': "slides[currentIndex]?.title"
                      }
                    }
                  } %}
                  {% include '_components/atoms/rich-text.twig' with {
                    "richText": {
                      "classes": 'c-active-content',
                      "content": 'Active Content',
                      attrs: {
                        'x-html': "slides[currentIndex]?.content"
                      }
                    }
                  } %}
                </div>
                {% include '_components/atoms/link.twig' with {
                  link: {
                    includeIcon: true,
                    text: 'View Entry',
                    spanAttrs: {
                      'x-text': "slides[currentIndex]?.linkText || 'View Entry'"
                    },
                    attrs: {
                      'x-bind:href': "slides[currentIndex]?.linkUrl || '#'"
                    }
                  }
                } %}
              </div>
            </div>
          </div>
        </div>

        {# Flickity/Right Slider Column #}
        <div class="c-slider-container col-span-16 md:col-span-12 relative">
          <div class="c-slider">
            {% for slide in block.pageSlides.all() %}
              {% set title = slide.title %}
              {% set content = slide.slideContent %}
              {% set linkUrl = slide.slideLink.getUrl() %}
              {% set linkText = slide.slideLink.text ?? 'View Photo' %}
              {% set image = slide.slideImage.one() %}

              <div 
                class="c-slide"
                data-title="{{ title|raw }}"
                data-content="{{ content|raw }}"
                data-link-url="{{ linkUrl }}"
                data-link-text="{{ linkText }}"
                data-index="{{ loop.index0 }}"
              >
                {{ img.renderImage(image, 1000, 1000, title, 'square') }}
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
