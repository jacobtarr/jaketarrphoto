import PhotoSwipeLightbox from 'photoswipe/lightbox';
import 'photoswipe/style.css';

const customArrow = `
  <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="24" cy="24" r="23.5" stroke="black"/>
    <path d="M19.5663 15.3441C19.3942 15.5163 19.3437 15.7757 19.4388 15.9999C19.5338 16.2241 19.7554 16.3683 19.9989 16.3643L30.3892 16.3643L15.3501 31.4033C15.1956 31.5535 15.1339 31.7754 15.1887 31.9838C15.2435 32.1923 15.4063 32.3551 15.6148 32.4099C15.8233 32.4648 16.0451 32.4031 16.1954 32.2485L31.2344 17.2095V27.5998C31.23 27.8162 31.3429 28.018 31.5296 28.1275C31.7163 28.237 31.9476 28.237 32.1343 28.1275C32.321 28.018 32.434 27.8162 32.4296 27.5998L32.4296 15.7667C32.4295 15.4366 32.162 15.1691 31.832 15.1691L19.9989 15.1691C19.8369 15.1664 19.6809 15.2296 19.5663 15.3441Z" fill="currentColor"/>
  </svg>
`;

const customClose = `
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M1 1L15 15M15 1L1 15" stroke="black" stroke-miterlimit="10"/>
  </svg>
`;

const customZoom = `
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M9.47009 0C4.24007 0 0 4.24007 0 9.47009C0 14.7001 4.24007 18.9402 9.47009 18.9402C11.8576 18.9402 14.0339 18.0504 15.6996 16.5924L22.9132 23.8059C22.9713 23.8665 23.041 23.9149 23.1181 23.9482C23.1952 23.9815 23.2782 23.9991 23.3622 24C23.4462 24.0008 23.5295 23.9849 23.6073 23.9532C23.685 23.9214 23.7557 23.8745 23.8151 23.8151C23.8745 23.7557 23.9214 23.685 23.9532 23.6073C23.9849 23.5295 24.0008 23.4462 24 23.3622C23.9991 23.2782 23.9815 23.1952 23.9482 23.1181C23.9149 23.041 23.8665 22.9713 23.8059 22.9132L16.5924 15.6996C18.0504 14.0339 18.9402 11.8576 18.9402 9.47009C18.9402 4.24007 14.7001 0 9.47009 0ZM9.47009 5.05071C9.81858 5.05071 10.1014 5.33355 10.1014 5.68205V8.83875H13.2581C13.6066 8.83875 13.8895 9.12159 13.8895 9.47009C13.8895 9.81858 13.6066 10.1014 13.2581 10.1014H10.1014V13.2581C10.1014 13.6066 9.81858 13.8895 9.47009 13.8895C9.12159 13.8895 8.83875 13.6066 8.83875 13.2581V10.1014H5.68205C5.33355 10.1014 5.05071 9.81858 5.05071 9.47009C5.05071 9.12159 5.33355 8.83875 5.68205 8.83875H8.83875V5.68205C8.83875 5.33355 9.12159 5.05071 9.47009 5.05071Z" fill="currentColor"/>
  </svg>
`;

export function initializePageGalleryComponent() {
  const links = document.querySelectorAll('a.has-lightbox-gallery');

  if (!links.length) return;

  const lightbox = new PhotoSwipeLightbox({
    gallery: '.c-page',
    children: 'a.has-lightbox-gallery',
    pswpModule: () => import('photoswipe'),
    arrowPrevSVG: customArrow,
    arrowNextSVG: customArrow,
    closeSVG: customClose,
    zoomSVG: customZoom,
    mainClass: 'pswp--custom-gallery',
    bgOpacity: 0.9,
  });

  lightbox.init();
}